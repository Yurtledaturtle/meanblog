<!DOCTYPE html>
<html ng-app="ArmchairPhilosophy">
  <head>
    <meta charset="utf-8">
    <title>Armchair Philosophy</title>
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.5/angular.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.5/angular-cookies.js"></script>
  </head>
  <body>

    <section ng-controller='UsersController'>

      <div class="meta-information">
        <h3>
          {{ welcome }}
        </h3>
      </div>

      <div ng-hide="token" class="sign-up">
        <h3>Sign Up:</h3>
        <form ng-submit="createUser()">
          <input type="text" ng-model="newUser.username" placeholder="...username">
          <input type="password" ng-model="newUser.password" placeholder="...password">
          <input type="submit">
        </form>
      </div>

      <div ng-hide="token" class="log-in">
        <h3>Log In:</h3>
        <form ng-submit="obtainToken()">
          <input type="text" ng-model="logInUser.username" placeholder="...username">
          <input type="password" ng-model="logInUser.password" placeholder="...password">
          <input type="submit">
        </form>
      </div>

      <h3 ng-show="token">You're logged in</h3>
      <button ng-show="token" type="button" ng-click="logOut()" name="button">LogOut</button>

      <div ng-show="token" class="new-reflection">
      </br>
        <form ng-submit='createReflection()'>
          <textarea ng-model="newReflection.name" type="text" placeholder='...name'></textarea>

          <!-- <ul>
            <div ng-repeat="item in newReflection.items">
              <input type="text" ng-model="item.name" placeholder="...name">
              <input type="text" ng-model="item.quantity" placeholder="...name">
            </div>
            <button type="button" ng-click="addItemLocation()" name="button">+</button>
          </ul> -->
        </br>
          <input type="submit">
        </form>
      </div>

      <div  ng-repeat="user in users">
        <span ng-click="user.reflectionsDisplay = !user.reflectionsDisplay">
          <h4>{{ user.username }}</h4>
          <div ng-show="user.reflectionsDisplay">
            <div ng-repeat="reflection in user.reflections">
              <p>
                {{reflection.name}}
                <!-- <ul>
                  <li ng-repeat="item in reflection.items">
                    {{item.name}} - {{item.quantity}}
                  </li>
                </ul> -->
              </p>
            </div>
          </div>
        </span>
      </div>

    </section>

    <script src="/js/app.js" charset="utf-8"></script>
  </body>
</html>
